<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="{{ url_for('static', filename='embed/bootstrap.custom.min.css', _external=True) }}" type="text/css" />
	<link rel="stylesheet" href="{{ url_for('static', filename='embed/overlay.css', _external=True) }}" type="text/css" />
</head>

<body>
<form id="call_form">
	<div class="form-group has-feedback col-sm-2">
		<label for="phone">Phone:</label>
		<input type="tel"  class="form-control" name="phone" id="phone_id"/>
		<span class="glyphicon form-control-feedback" aria-hidden="true"></span>
	</div>

	{% if campaign.segment_by == 'location' %}
	<div class="form-group has-feedback col-sm-2">
		<label for="location">Zipcode:</label>
		<input type="text" class="form-control" name="location" id="location_id" />
		<span class="glyphicon form-control-feedback" aria-hidden="true"></span>
	</div>
	{% endif %}

	<input type="submit" class="btn btn-default" value="Call Now" />
</form>

<script src="{{ url_for('static', filename='embed/iframeResizer.contentWindow.min.js', _external=True) }}"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

<script type="text/javascript">
	    var CallPowerOptions = {};
	        CallPowerOptions.form = jQuery("#call_form");
	        CallPowerOptions.phoneField = jQuery("#phone_id");
	        {% if campaign.segment_by == 'location' %}
	        CallPowerOptions.locationField = jQuery("#location_id");
	        {% endif %}
	        CallPowerOptions.scriptDisplay = "replace";
	        {% if campaign.embed.custom_css%}CallPowerOptions.customCSS = "{{campaign.embed.custom_css}}";{%endif%}
	        CallPowerOptions.onError = function(element, message) {
			    element.parent('.form-group').addClass('has-error');
			    element.next('.form-control-feedback').addClass('glyphicon-remove');
			    return false;
			 };
			 CallPowerOptions.cleanPhone = function() {
			    var isValid = this.cleanUSPhone();
			    if (isValid) {
			    	this.phoneField.parent('.form-group')
			    		.removeClass('has-error')
			    		.addClass('has-success');
			    	this.phoneField.next('.form-control-feedback')
			    		.removeClass('glyphicon-remove')
			    		.addClass('glyphicon-ok');
				}
			 };
			 CallPowerOptions.cleanLocation = function() {
			    var isValid = this.cleanUSZipcode();
			    if (isValid) {
			    	this.locationField.parent('.form-group')
			    		.removeClass('has-error')
			    		.addClass('has-success');
			    	this.locationField.next('.form-control-feedback')
			    		.removeClass('glyphicon-remove')
			    		.addClass('glyphicon-ok');
				}
			 };
	</script>
<script type="text/javascript" src="{{url_for('api.campaign_embed_js', campaign_id=campaign.id, _external=True)}}"></script>

</body>
</html>
